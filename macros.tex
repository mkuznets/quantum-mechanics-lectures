% Жирный вектор
\newcommand{\vect}[1] { \mathbf{#1} }
\newcommand{\V}[1] { \mathbf{#1} }

% Полная производная
\newcommand{\D}[2]{\frac{\diff{#1}}{\diff{#2}}}

% Частная производная
\newcommand{\pd}[2]{\frac{\partial{#1}}{\partial{#2}}}

% Дивергенция
\def\Div{\mathop{\mathrm{div}}\nolimits}

% Ротор
\def\rot{\mathop{\mathrm{rot}}\nolimits}

% Градиент
\def\grad{\mathop{\mathrm{grad}}\nolimits}

% Константа
\def\const{\mathop{\mathrm{const}}\nolimits}

% Оператор
\newcommand{\op}[1]{\widehat{#1}}

% Векторный оператор
\newcommand{\opv}[1]{\op{\vec{#1}}}

% Скобки (высокие)
\newcommand{\brc}[1]{\left ( {#1} \right )}

% Скобки фигурные (высокие)
\newcommand{\brcr}[1]{\left\{ {#1} \right\}}

% Скобки квадратные (высокие)
\newcommand{\brs}[1]{\left [ {#1} \right ]}

% Усреднение
\newcommand{\avg}[1]{\langle{#1}\rangle}

% Усреднение (высокое)
\newcommand{\avgh}[1]{\left\langle{#1}\right\rangle}

% Бра-вектор
\newcommand{\bra}[1]{\left\langle{#1}\right|}

% Кет-вектор
\newcommand{\ket}[1]{\left|{#1}\right\rangle}


% Скалярное произведение
\newcommand{\bk}[2]{\langle{#1}|{#2}\rangle}

% Скалярное произведение (высокое)
\newcommand{\bkh}[2]{\left\langle{#1}\bigg|{#2}\right\rangle}

% Проектор
\newcommand{\proj}[2]{\ket{#1}\bra{#2}}

% Матричный элемент
\newcommand{\bfk}[3]{\langle{#1}|{#2}|{#3}\rangle}

% Матричный элемент (высокий)
\newcommand{\bfkh}[3]{\left\langle{#1}\left|{#2}\right|{#3}\right\rangle}

% Действительная и мнимая части
\def\Re{\mathop{\mathrm{Re}}\nolimits}
\def\Im{\mathop{\mathrm{Im}}\nolimits}

% Модуль
\providecommand{\abs}[1]{\left\lvert{#1}\right\rvert}

% Норма
\providecommand{\norm}[1]{\lVert#1\rVert}

% След матрицы

\def\sp{\mathop{\mathrm{sp}}\nolimits}

\newcommand{\vp}{\vec{p}}
\newcommand{\vsp}{\vec{p'}}
\newcommand{\vr}{\vec{r}}
\newcommand{\vsr}{\vec{r'}}
\newcommand{\Vmn}{V_{mn}}
\newcommand{\ommn}{\omega_{mn}}
\newcommand{\vA}{\vec{A}}

% Дираковский спинор
\newcommand{\Psis}{\mathsf{\Psi}}

% Матрицы Дирака
\newcommand{\aD}{\op{\bm{\alpha}}}
\newcommand{\bD}{\op{\beta}}

% Матрицы Паули
\newcommand{\msigm}{\op{\bm{\sigma}}}

% Оператор удлинненного импульса
\newcommand{\plong}{\op{\vec{\mathscr P}}}

% Оператор магнитного момента
\newcommand{\mmu}{\op{\bm{\mu}}}

% Магнитное поле
\newcommand{\Hvec}{\overrightarrow{\mathscr{H}}}
\newcommand{\Hsc}{\mathscr{H}}

% Операторы рождения и уничтожения
\newcommand{\cre}{\op{a}^\dag}
\newcommand{\ann}{\op{a}}

\renewcommand{\vec}{\mathbf}
%\renewcommand{\exp}{\ex}

\newcommand{\zr}{{(0)}}
\newcommand{\one}{{(1)}}

% Привычное написание букв каппа, эпсилон и фи
\renewcommand{\kappa}{\varkappa }
\renewcommand{\epsilon}{\varepsilon}
\renewcommand{\phi}{\varphi}


\newcommand*\diff{\mathop{}\!\mathrm{d}}

% Жирная (векторная) "хи"
% жирность через bm - грязный хак (mathbf не применяется к греческим, а bm делает латинские буквы курсивными)
\DeclareRobustCommand{\rchi}{{\bm{\mathpalette\irchi\relax}}}
\newcommand{\irchi}[2]{\raisebox{\depth}{$#1\chi$}} % inner command, used by \rchi

\makeatletter
\renewcommand*\env@matrix[1][c]{\hskip -\arraycolsep
\let\@ifnextchar\new@ifnextchar
\array{*\c@MaxMatrixCols #1}}
\makeatother

% Ламбда с чертой
\def\lambdabar{\protect\@lambdabar}
\def\@lambdabar{%
\relax
\bgroup
\def\@tempa{\hbox{\raise.73\ht0
\hbox to0pt{\kern.25\wd0\vrule width.5\wd0
height.1pt depth.1pt\hss}\box0}}%
\mathchoice{\setbox0\hbox{$\displaystyle\lambda$}\@tempa}%
{\setbox0\hbox{$\textstyle\lambda$}\@tempa}%
{\setbox0\hbox{$\scriptstyle\lambda$}\@tempa}%
{\setbox0\hbox{$\scriptscriptstyle\lambda$}\@tempa}%
\egroup
}


% Функции Эйри
\def\Ai{\mathop{\mathrm{Ai}}\nolimits}
\def\Bi{\mathop{\mathrm{Bi}}\nolimits}


% Позволяет рисовать цифры в круге.
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,draw,inner sep=2pt] (char) {#1};}}


% Крупная хи
\newcommand{\bigchi}{\text{\scalebox{1.5}{$\chi$}}}


% Римские цифры
\makeatletter
\newcommand*{\rom}[1]{\expandafter\@slowromancap\romannumeral #1@}
\makeatother


% Ссылка на книги Ландау и Лифшица.
% \llref[опциональный комментарий]{параграф}{том}
\newcommand{\llref}[3][]{\text{\S{\kern 0.25em}#2 т.~\rom{#3}~Л.Л.#1}}

% Ссылка на параграф из конспекта
% \sref{параграф}{глава}
\newcommand{\sref}[2]{\text{\S{\kern 0.25em}#1 гл.~#2}}
\newcommand{\srefs}[2]{\text{\S}\sref{#1}{#2}}
\newcommand{\srefthis}[1]{\text{\S{\kern 0.25em}#1 этой главы}}


% Вектор-столбец (с меньшим расстоянием от скобок, чем если рисовать руками)
% Первый аргумент - число элементов, остальные - сами элементы
% Например:
% \colvec{3}{a}{b}{c}
% \colvec{2}{a}{b}
\newcount\colveccount
\newcommand*\colvec[1]{
        \global\colveccount#1
        \begin{pmatrix}
        \colvecnext
}
\def\colvecnext#1{
        #1
        \global\advance\colveccount-1
        \ifnum\colveccount>0
                \\
                \expandafter\colvecnext
        \else
                \end{pmatrix}
        \fi
}

